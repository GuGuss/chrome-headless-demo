function __checkJquery(){triggermail.__tm_initialized||(window.jQuery?(triggermail.initialize(),triggermail.__tm_initialized=!0):window.setTimeout(__checkJquery,100))}!function(){var e=!1,t=/var xyz/.test(function(){})?/\b_super\b/:/[\D|\d]*/;this.__tmClass=function(){},window.__tmClass=this.__tmClass,__tmClass.extend=function(i){function r(){!e&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;e=!0;var o=new this;e=!1;for(var a in i)o[a]="function"==typeof i[a]&&"function"==typeof n[a]&&t.test(i[a])?function(e,t){return function(){var i=this._super;this._super=n[e];var r=t.apply(this,arguments);return this._super=i,r}}(a,i[a]):i[a];return r.prototype=o,r.prototype.constructor=r,r.extend=arguments.callee,window.__tmClass=r,r}}(),window._c2pService=window._c2pService||[],window.triggermail={config:{eventSource:"custom_integration",encodeCookie:!1}},window.console?void 0===window.console.debug&&(console.debug=function(){}):console={debug:function(){},error:function(){},log:function(){}},window.TM_API_HOST="api.bluecore.com/api",window.triggermail.lytics=[],triggermail.lytics.__SV=1.2,function(e){function t(){t.done||(t.done=!0,b=!0,_=!1,y.each(T,function(e){e._dom_loaded()}))}function i(){try{u.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}t()}var r=Array.prototype,n=Object.prototype,o=r.slice,a=n.toString,c=n.hasOwnProperty,s=window.console,l=window.navigator,u=window.document,d=l.userAgent,g=["__mps","__mpa","__mpap","$people_distinct_id","__alias"],p=!1;try{var p=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var f="https:"==u.location.protocol?"https://":"http://",m=e&&e.__SV||0,h=p,_=!h&&-1==d.indexOf("MSIE"),y={},v=!1,w={api_host:f+TM_API_HOST,cross_subdomain_cookie:!0,cookie_name:window.triggermail.custom_cookie_name||"",loaded:function(){},store_google:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,live_demo:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,ip:!0},b=!1;!function(){var e=r.forEach,t=r.indexOf,i=Array.isArray,n={},s=y.each=function(t,i,r){if(null!=t)if(e&&t.forEach===e)t.forEach(i,r);else if(t.length===+t.length){for(var o=0,a=t.length;o<a;o++)if(o in t&&i.call(r,t[o],o,t)===n)return}else for(var s in t)if(c.call(t,s)&&i.call(r,t[s],s,t)===n)return};y.extend=function(e){return s(o.call(arguments,1),function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])}),e},y.isArray=i||function(e){return"[object Array]"===a.call(e)},y.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},y.isArguments=function(e){return!(!e||!c.call(e,"callee"))},y.toArray=function(e){return e?e.toArray?e.toArray():y.isArray(e)?o.call(e):y.isArguments(e)?o.call(e):y.values(e):[]},y.values=function(e){var t=[];return null==e?t:(s(e,function(e){t[t.length]=e}),t)},y.identity=function(e){return e},y.include=function(e,i){var r=!1;return null==e?r:t&&e.indexOf===t?-1!=e.indexOf(i):(s(e,function(e){if(r||(r=e===i))return n}),r)},y.includes=function(e,t){return-1!==e.indexOf(t)}}(),y.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},y.isObject=function(e){return e===Object(e)&&!y.isArray(e)},y.isEmptyObject=function(e){if(y.isObject(e)){for(var t in e)if(c.call(e,t))return!1;return!0}return!1},y.isUndefined=function(e){return void 0===e},y.isString=function(e){return"[object String]"==a.call(e)},y.isDate=function(e){return"[object Date]"==a.call(e)},y.isNumber=function(e){return"[object Number]"==a.call(e)},y.encodeDates=function(e){return y.each(e,function(t,i){y.isDate(t)?e[i]=y.formatDate(t):y.isObject(t)&&(e[i]=y.encodeDates(t))}),e},y.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},y.strip_empty_properties=function(e){var t={};return y.each(e,function(e,i){y.isString(e)&&e.length>0&&(t[i]=e)}),t},y.truncate=function(e,t){var i;return"string"==typeof e?i=e.slice(0,t):y.isArray(e)?(i=[],y.each(e,function(e){i.push(y.truncate(e,t))})):y.isObject(e)?(i={},y.each(e,function(e,r){i[r]=y.truncate(e,t)})):i=e,i},y.trim=function(e){return String.prototype.trim?String(e).trim():this.replace(/^\s+|\s+$/g,"")},y.JSONEncode=function(){return function(e){var t=e,i=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},r=function(e,t){var n="",o=0,s="",l="",u=0,d=n,g=[],p=t[e];switch(typeof p){case"string":return i(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(n+="    ",g=[],"[object Array]"===a.apply(p)){for(u=p.length,o=0;o<u;o+=1)g[o]=r(o,p)||"null";return l=0===g.length?"[]":n?"[\n"+n+g.join(",\n"+n)+"\n"+d+"]":"["+g.join(",")+"]",n=d,l}for(s in p)c.call(p,s)&&(l=r(s,p))&&g.push(i(s)+(n?": ":":")+l);return l=0===g.length?"{}":n?"{"+g.join(",")+d+"}":"{"+g.join(",")+"}",n=d,l}};return r("",{"":t})}}(),y.JSONDecode=function(){var e,t,i,r,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:e,text:i}},a=function(r){return r&&r!==t&&o("Expected '"+r+"' instead of '"+t+"'"),t=i.charAt(e),e+=1,t},c=function(){var e,i="";for("-"===t&&(i="-",a("-"));t>="0"&&t<="9";)i+=t,a();if("."===t)for(i+=".";a()&&t>="0"&&t<="9";)i+=t;if("e"===t||"E"===t)for(i+=t,a(),"-"!==t&&"+"!==t||(i+=t,a());t>="0"&&t<="9";)i+=t,a();if(e=+i,isFinite(e))return e;o("Bad number")},s=function(){var e,i,r,c="";if('"'===t)for(;a();){if('"'===t)return a(),c;if("\\"===t)if(a(),"u"===t){for(r=0,i=0;i<4&&(e=parseInt(a(),16),isFinite(e));i+=1)r=16*r+e;c+=String.fromCharCode(r)}else{if("string"!=typeof n[t])break;c+=n[t]}else c+=t}o("Bad string")},l=function(){for(;t&&t<=" ";)a()},u=function(){switch(t){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+t+"'")},d=function(){var e=[];if("["===t){if(a("["),l(),"]"===t)return a("]"),e;for(;t;){if(e.push(r()),l(),"]"===t)return a("]"),e;a(","),l()}}o("Bad array")},g=function(){var e,i={};if("{"===t){if(a("{"),l(),"}"===t)return a("}"),i;for(;t;){if(e=s(),l(),a(":"),Object.hasOwnProperty.call(i,e)&&o('Duplicate key "'+e+'"'),i[e]=r(),l(),"}"===t)return a("}"),i;a(","),l()}}o("Bad object")};return r=function(){switch(l(),t){case"{":return g();case"[":return d();case'"':return s();case"-":return c();default:return t>="0"&&t<="9"?c():u()}},function(n){var a;return i=n,e=0,t=" ",a=r(),l(),t&&o("Syntax error"),a}}(),y.base64Encode=function(e){var t,i,r,n,o,a,c,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,d=0,g="",p=[];if(!e)return e;e=y.utf8Encode(e);do{t=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),s=t<<16|i<<8|r,n=s>>18&63,o=s>>12&63,a=s>>6&63,c=63&s,p[d++]=l.charAt(n)+l.charAt(o)+l.charAt(a)+l.charAt(c)}while(u<e.length);switch(g=p.join(""),e.length%3){case 1:g=g.slice(0,-2)+"==";break;case 2:g=g.slice(0,-1)+"="}return g},y.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t,i,r,n="",o=0;for(t=i=0,o=e.length,r=0;r<o;r++){var a=e.charCodeAt(r),c=null;a<128?i++:c=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==c&&(i>t&&(n+=e.substring(t,i)),n+=c,t=i=r+1)}return i>t&&(n+=e.substring(t,e.length)),n},y.UUID=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},i=function(e){function t(e,t){var i,r=0;for(i=0;i<t.length;i++)r|=o[i]<<8*i;return e^r}var i,r,n=d,o=[],a=0;for(i=0;i<n.length;i++)r=n.charCodeAt(i),o.unshift(255&r),o.length>=4&&(a=t(a,o),o=[]);return o.length>0&&(a=t(a,o)),a.toString(16)};return function(){var r=(screen.height*screen.width).toString(16);return e()+"-"+t()+"-"+i()+"-"+r+"-"+e()}}(),y.isBlockedUA=function(){return!!/(google web preview|baiduspider|yandexbot)/i.test(d)},y.HTTPBuildQuery=function(e,t){var i,r,n=[];return void 0===t&&(t="&"),y.each(e,function(e,t){i=encodeURIComponent(e.toString()),r=encodeURIComponent(t),n[n.length]=r+"="+i}),n.join(t)},y.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",r=new RegExp(i),n=r.exec(e);return null===n||n&&"string"!=typeof n[1]&&n[1].length?"":decodeURIComponent(n[1]).replace(/\+/g," ")},y.cookie={get:function(e){for(var t=e+"=",i=u.cookie.split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t)){var o=n.substring(t.length,n.length);return triggermail.config.encodeCookie?y.cookie.decode(o):decodeURIComponent(o)}}return null},parse:function(e){var t;try{t=y.JSONDecode(y.cookie.get(e))||{}}catch(e){}return t},set:function(e,t,i,r){var n="",o="";if(r){var a=u.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),c=a?a[0]:"";n=c?"; domain=."+c:""}if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),o="; expires="+s.toGMTString()}t=triggermail.config.encodeCookie?y.cookie.encode(t):encodeURIComponent(t),u.cookie=e+"="+t+o+"; path=/"+n},remove:function(e,t){y.cookie.set(e,"",-1,t)},encode:function(e){return e=y.cookie._encoder.encode(e),e=e.replace(/=/g,""),e=encodeURIComponent(e),e.replace(/%/g,"-")},decode:function(e){return/^%7B%22.*%22%7D$/.test(e)?decodeURIComponent(e):(e=e.replace(/-/g,"%"),e=decodeURIComponent(e),e=y.cookie._encoder.decode(e))},_encoder:function(){function e(e){var t,r,n,o,a,c;for(n=e.length,r=0,t="";r<n;){if(o=255&e.charCodeAt(r++),r==n){t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4),t+="==";break}if(a=e.charCodeAt(r++),r==n){t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4|(240&a)>>4),t+=i.charAt((15&a)<<2),t+="=";break}c=e.charCodeAt(r++),t+=i.charAt(o>>2),t+=i.charAt((3&o)<<4|(240&a)>>4),t+=i.charAt((15&a)<<2|(192&c)>>6),t+=i.charAt(63&c)}return t}function t(e){var t,i,n,o,a,c,s;for(c=e.length,a=0,s="";a<c;){do{t=r[255&e.charCodeAt(a++)]}while(a<c&&-1==t);if(-1==t)break;do{i=r[255&e.charCodeAt(a++)]}while(a<c&&-1==i);if(-1==i)break;s+=String.fromCharCode(t<<2|(48&i)>>4);do{if(61==(n=255&e.charCodeAt(a++)))return s;n=r[n]}while(a<c&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(o=255&e.charCodeAt(a++)))return s;o=r[o]}while(a<c&&-1==o);if(-1==o)break;s+=String.fromCharCode((3&n)<<6|o)}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);return{encode:e,decode:t}}()},y.register_event=function(){function e(e,i,r){return function(n){var o=n;n=n||t(window.event);var a,c;void 0!==n&&(c=i.call(e,n)),y.isFunction(r)&&(a=r(o));var s=!0;return!1!==a&&!1!==c||(s=!1),s}}function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}var i=function(t,i,r,n){if(!t)return void k.error("No valid element provided to register_event");if(t.addEventListener&&!n)t.addEventListener(i,r,!1);else{var o="on"+i,a=t[o];t[o]=e(t,r,a)}};return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},i}(),y.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}function t(e,t){var i=" "+t+" ";return(" "+e.className+" ").replace(r," ").indexOf(i)>=0}function i(i){if(!u.getElementsByTagName)return new Array;for(var r,n=i.split(" "),o=new Array(u),a=0;a<n.length;a++)if(r=n[a].replace(/^\s+/,"").replace(/\s+$/,""),r.indexOf("#")>-1){var c=r.split("#"),s=c[0],l=c[1],d=u.getElementById(l);if(!d||s&&d.nodeName.toLowerCase()!=s)return new Array;o=new Array(d)}else if(r.indexOf(".")>-1){var c=r.split("."),s=c[0],g=c[1];s||(s="*");for(var p=new Array,f=0,m=0;m<o.length;m++){var h;h="*"==s?e(o[m]):o[m].getElementsByTagName(s);for(var _=0;_<h.length;_++)p[f++]=h[_]}o=new Array;for(var v=0,w=0;w<p.length;w++)p[w].className&&y.isString(p[w].className)&&t(p[w],g)&&(o[v++]=p[w])}else if(r.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var s=RegExp.$1,b=RegExp.$2,k=RegExp.$3,x=RegExp.$4;s||(s="*");for(var p=new Array,f=0,m=0;m<o.length;m++){var h;h="*"==s?e(o[m]):o[m].getElementsByTagName(s);for(var _=0;_<h.length;_++)p[f++]=h[_]}o=new Array;var S,v=0;switch(k){case"=":S=function(e){return e.getAttribute(b)==x};break;case"~":S=function(e){return e.getAttribute(b).match(new RegExp("\\b"+x+"\\b"))};break;case"|":S=function(e){return e.getAttribute(b).match(new RegExp("^"+x+"-?"))};break;case"^":S=function(e){return 0==e.getAttribute(b).indexOf(x)};break;case"$":S=function(e){return e.getAttribute(b).lastIndexOf(x)==e.getAttribute(b).length-x.length};break;case"*":S=function(e){return e.getAttribute(b).indexOf(x)>-1};break;default:S=function(e){return e.getAttribute(b)}}o=new Array,v=0;for(var w=0;w<p.length;w++)S(p[w])&&(o[v++]=p[w])}else{s=r;for(var p=new Array,f=0,m=0;m<o.length;m++)for(var h=o[m].getElementsByTagName(s),_=0;_<h.length;_++)p[f++]=h[_];o=p}return o}var r=/[\t\r\n]/g;return i}(),y.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",i={};return y.each(e,function(e){t=y.getQueryParam(u.URL,e),t.length&&(i[e]=t)}),i},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=y.info.searchEngine(e),i="yahoo"!=t?"q":"p",r={};if(null!==t){r.g_search_engine=t;var n=y.getQueryParam(e,i);n.length&&(r.mp_keyword=n)}return r},browser:function(){var e=d,t=l.vendor||"";return window.opera?y.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":y.includes(e,"Chrome")?"Chrome":y.includes(t,"Apple")?y.includes(e,"Mobile")?"Mobile Safari":"Safari":y.includes(e,"Android")?"Android Mobile":y.includes(e,"Konqueror")?"Konqueror":y.includes(e,"Firefox")?"Firefox":y.includes(e,"MSIE")?"Internet Explorer":y.includes(e,"Gecko")?"Mozilla":""},os:function(){var e=d;return/Windows/i.test(e)?/Phone/.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:function(){var e=d;return/iPhone/.test(e)?"iPhone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return y.strip_empty_properties({os:y.info.os(),browser:y.info.browser(),device:y.info.device(),mp_lib:"web"})},people_properties:function(){return y.strip_empty_properties({$os:y.info.os(),$browser:y.info.browser()})},pageviewInfo:function(e){return y.strip_empty_properties({mp_page:e,mp_referrer:u.referrer,mp_browser:y.info.browser(),mp_platform:y.info.os()})}};var k={log:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s)try{s.log.apply(s,arguments)}catch(e){y.each(arguments,function(e){s.log(e)})}},error:function(){if((v||triggermail.util.cookie.get("_bc_platform_debug"))&&!y.isUndefined(s)&&s){var e=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,e)}catch(t){y.each(e,function(e){s.error(e)})}}},critical:function(){if(!y.isUndefined(s)&&s){var e=["Bluecore error:"].concat(y.toArray(arguments));try{s.error.apply(s,e)}catch(t){y.each(e,function(e){s.error(e)})}}}},x=function(){};x.prototype.create_properties=function(){},x.prototype.event_handler=function(){},x.prototype.after_track_handler=function(){},x.prototype.init=function(e){return this.mp=e,this},x.prototype.track=function(e,t,i,r){var n=this,o=y.dom_query(e);return 0==o.length?void k.error("The DOM query ("+e+") returned 0 elements"):(y.each(o,function(e){y.register_event(e,this.override_event,function(e){var o={},a=n.create_properties(i,this),c=n.mp.get_config("track_links_timeout");n.event_handler(e,this,o),window.setTimeout(n.track_callback(r,a,o,!0),c),n.mp.track(t,a,n.track_callback(r,a,o))})},this),!0)},x.prototype.track_callback=function(e,t,i,r){r=r||!1;var n=this;return function(){i.callback_fired||(i.callback_fired=!0,e&&!1===e(r,t)||n.after_track_handler(t,i,r))}},x.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):y.extend({},e)};var S=function(){this.override_event="click"};y.inherit(S,x),S.prototype.create_properties=function(e,t){var i=S.superclass.create_properties.apply(this,arguments);return t.href&&(i.url=t.href),i},S.prototype.event_handler=function(e,t,i){i.new_tab=2===e.which||e.metaKey||"_blank"===t.target,i.href=t.href,i.new_tab||e.preventDefault()},S.prototype.after_track_handler=function(e,t,i){t.new_tab||setTimeout(function(){window.location=t.href},0)};var E=function(){this.override_event="submit"};y.inherit(E,x),E.prototype.event_handler=function(e,t,i){i.element=t,e.preventDefault()},E.prototype.after_track_handler=function(e,t,i){setTimeout(function(){t.element.submit()},0)};var A=function(e){this.props={},this.campaign_params_saved=!1,e.cookie_name?this.name="mp_"+e.cookie_name:this.name="mp_"+e.token+"_mixpanel",this.load(),this.update_config(e),this.upgrade(e),this.save()};A.prototype.properties=function(){var e={};return y.each(this.props,function(t,i){y.include(g,i)||(e[i]=t)}),e},A.prototype.load=function(){if(!this.disabled){var e=y.cookie.parse(this.name);e&&(this.props=y.extend({},e))}},A.prototype.upgrade=function(e){var t,i,r=e.upgrade;r&&(t="mp_super_properties","string"==typeof r&&(t=r),i=y.cookie.parse(t),y.cookie.remove(t),y.cookie.remove(t,!0),i&&(this.props=y.extend(this.props,i.all,i.events))),e.cookie_name||"mixpanel"===e.name||(t="mp_"+e.token+"_"+e.name,(i=y.cookie.parse(t))&&(y.cookie.remove(t),y.cookie.remove(t,!0),this.register_once(i)))},A.prototype.save=function(){this.disabled||y.cookie.set(this.name,y.JSONEncode(this.props),this.expire_days,this.cross_subdomain)},A.prototype.remove=function(){y.cookie.remove(this.name,!1),y.cookie.remove(this.name,!0)},A.prototype.clear=function(){this.remove(),this.props={}},A.prototype.register_once=function(e,t,i){return!!y.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===i?this.default_expiry:i,y.each(e,function(e,i){this.props[i]&&this.props[i]!==t||(this.props[i]=e)},this),this.save(),!0)},A.prototype.register=function(e,t){return!!y.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,y.extend(this.props,e),this.save(),!0)},A.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},A.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(y.info.campaignParams()),this.campaign_params_saved=!0)},A.prototype.update_search_keyword=function(e){this.register(y.info.searchInfo(e))},A.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:y.info.referringDomain(e)||"$direct"},"")},A.prototype.get_referrer_info=function(){return y.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},A.prototype.safe_merge=function(e){return y.each(this.props,function(t,i){i in e||(e[i]=t)}),e},A.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie)},A.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},A.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},A.prototype.get_cross_subdomain=function(){return this.cross_subdomain},A.prototype._add_to_people_queue=function(e,t){var i=this._get_queue_key(e),r=t[e],n=this._get_or_create_queue("$set"),o=this._get_or_create_queue("$add"),a=this._get_or_create_queue("$append",[]);"__mps"===i?(y.extend(n,r),this._pop_from_people_queue("$add",r)):"__mpa"===i?y.each(r,function(e,t){t in n?n[t]+=e:(t in o||(o[t]=0),o[t]+=e)},this):"__mpap"===i&&a.push(r),k.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),k.log(t),this.save()},A.prototype._pop_from_people_queue=function(e,t){var i=this._get_queue(e);y.isUndefined(i)||(y.each(t,function(e,t){delete i[t]},this),this.save())},A.prototype._get_queue_key=function(e){return"$set"===e?"__mps":"$add"===e?"__mpa":"$append"===e?"__mpap":void k.error("Invalid queue:",e)},A.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},A.prototype._get_or_create_queue=function(e,t){var i=this._get_queue_key(e),t=y.isUndefined(t)?{}:t;return this.props[i]||(this.props[i]=t)};var O=function(t,i,r){var n,o="triggermail.lytics"===r?e:e[r];return o&&!y.isArray(o)?void k.error("You have already initialized "+r):(n=new C,n._init(t,i,r),n.people=new P,n.people._init(n),v=v||n.get_config("debug"),y.isUndefined(o)||(n._execute_array.call(n.people,o.people),n._execute_array(o)),n)},C=function(){};C.prototype.init=function(t,i,r){if(void 0===r)return void k.error("You must name your new library: init(token, config, name)");if("triggermail.lytics"===r)return void k.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");var n=O(t,i,r);return e[r]=n,n._loaded(),n},C.prototype._init=function(e,t,i){this.__loaded=!0,this.config={},this.set_config(y.extend({},w,t,{name:i,token:e,callback_fn:("triggermail.lytics"===i?i:"triggermail.lytics."+i)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new A(this.config),this.register_once({distinct_id:y.UUID()},"")},C.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},C.prototype._dom_loaded=function(){y.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),y.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue},C.prototype._track_dom=function(e,t){if(this.get_config("img"))return k.error("You can't use DOM tracking functions with img = true."),!1;if(!b)return this.__dom_loaded_queue.push([e,t]),!1;var i=(new e).init(this);return i.track.apply(i,t)},C.prototype._prepare_callback=function(e,t){if(y.isUndefined(e))return null;if(h){return function(i){e(i,t)}}var i=this._jsc,r=""+Math.floor(1e8*Math.random()),n=this.get_config("callback_fn")+'["'+r+'"]';return i[r]=function(n){delete i[r],e(n,t)},n},C.prototype._send_request=function(e,t,i){if(_)return void this.__request_queue.push(arguments);var r=this.get_config("verbose");if(this.get_config("test")&&(t.test=1),r&&(t.verbose=1),this.get_config("img")&&(t.img=1),i&&!h&&(t.callback=i),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),"img"in t){var n=u.createElement("img");n.src=e,u.body.appendChild(n)}else if(h){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.withCredentials=!0,o.onreadystatechange=function(e){if(4===o.readyState)if(200===o.status||202===o.status)i&&i(r?y.JSONDecode(o.responseText):Number(o.responseText));else{var t="Bad HTTP status: "+o.status+" "+o.statusText;k.error(t),i&&i(r?{status:0,error:t}:0)}},o.send(y.HTTPBuildQuery(t))}else{e+="?"+y.HTTPBuildQuery(t);var a=u.createElement("script");a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e;var c=u.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}},C.prototype._execute_array=function(e){var t,i=[],r=[],n=[];y.each(e,function(e){e&&(t=e[0],"function"==typeof e?e.call(this):y.isArray(e)&&"alias"===t?i.push(e):y.isArray(e)&&-1!=t.indexOf("track")&&"function"==typeof this[t]?n.push(e):r.push(e))},this);var o=function(e,t){y.each(e,function(e){this[e[0]].apply(this,e.slice(1))},t)};o(i,this),o(r,this),o(n,this)},C.prototype.push=function(e){this._execute_array([e])},C.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},C.prototype.track=function(e,t,i){if(void 0===e)return void k.error("No event name provided to mixpanel.track");t=t||{},t.token=t.token||this.get_config("token"),triggermail.config.eventSource&&(t.event_source=triggermail.config.eventSource),this.cookie.update_search_keyword(u.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(u.referrer),t=y.extend({},y.info.properties(),this.cookie.properties(),t),delete t.ch,(triggermail.util.strip_props_before_send||function(e){return e})(t);var r={event:e,properties:t};v&&(r.validate=1);var n=y.truncate(r,1023),o=y.JSONEncode(n),a=y.base64Encode(o);k.log("BLUECORE REQUEST:"),k.log(n);var c=a;return payload={data:c},-1!=this.get_distinct_id().indexOf("live_demo")?(payload.live_demo=!0,track_path=this.get_config("api_host")+"/templates/demo_track/"+e):-1!=this.get_distinct_id().indexOf("event_stream")?(payload.event_stream=!0,track_path=this.get_config("api_host")+"/templates/event_stream_track/"+e):track_path=this.get_config("api_host")+"/track/"+e,this._send_request(track_path,payload,this._prepare_callback(i,n)),n},C.prototype.track_pageview=function(e){void 0===e&&(e=u.location.href),this.track("mp_page_view",y.info.pageviewInfo(e))},C.prototype.track_links=function(){return this._track_dom.call(this,S,arguments)},C.prototype.track_forms=function(){return this._track_dom.call(this,E,arguments)},C.prototype.register=function(e,t){this.cookie.register(e,t)},C.prototype.register_once=function(e,t,i){this.cookie.register_once(e,t,i)},C.prototype.unregister=function(e){this.cookie.unregister(e)},C.prototype._register_single=function(e,t){var i={};i[e]=t,this.register(i)},C.prototype.identify=function(e,t,i,r){e!=this.get_distinct_id()&&e!=this.get_property("__alias")&&(this.unregister("__alias"),this._register_single("distinct_id",e)),this._flags.identify_called=!0,this.people._flush(t,i,r)},C.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},C.prototype.alias=function(e,t){if(e===this.get_property("$people_distinct_id"))return k.critical("Attempting to create alias for existing People user - aborting."),-2;var i=this;return y.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single("__alias",e),this.track("$create_alias",{alias:e,distinct_id:t},function(t){i.identify(e)})):(k.error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},C.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},C.prototype.set_config=function(e){y.isObject(e)&&(y.extend(this.config,e),this.cookie&&this.cookie.update_config(this.config),v=v||this.get_config("debug"))},C.prototype.get_config=function(e){return this.config[e]},C.prototype.get_property=function(e){return this.cookie.props[e]},C.prototype.toString=function(){var e=this.get_config("name");return"triggermail.lytics"!==e&&(e="triggermail.lytics."+e),e};var P=function(){};if(P.prototype._init=function(e){this._mixpanel=e},P.prototype.set=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){"$distinct_id"!=t&&"$token"!=t&&(n[t]=e)}),i=t):n[e]=t,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(u.referrer),n=y.extend({},y.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),n),r.$set=n,this._send_request(r,i)},P.prototype.increment=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){if("$distinct_id"!=t&&"$token"!=t)return isNaN(parseFloat(e))?void k.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):void(n[t]=e)}),i=t):(y.isUndefined(t)&&(t=1),n[e]=t),r.$add=n,this._send_request(r,i)},P.prototype.append=function(e,t,i){var r={},n={};return y.isObject(e)?(y.each(e,function(e,t){"$distinct_id"!=t&&"$token"!=t&&(n[t]=e)}),i=t):n[e]=t,r.$append=n,this._send_request(r,i)},P.prototype.track_charge=function(e,t,i){return!y.isNumber(e)&&(e=parseFloat(e),isNaN(e))?void k.error("Invalid value passed to mixpanel.people.track_charge - must be a number"):this.append("$transactions",y.extend({$amount:e},t),i)},P.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},P.prototype.delete_user=function(){if(!this._identify_called())return void k.error("mixpanel.people.delete_user() requires you to call identify() first");var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)},P.prototype.toString=function(){return this._mixpanel.toString()+".people"},P.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var i=y.encodeDates(e),r=y.truncate(i,255),n=y.JSONEncode(i),o=y.base64Encode(n);return this._identify_called()?(k.log("BLUECORE PEOPLE REQUEST:"),k.log(r),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:o},this._mixpanel._prepare_callback(t,r)),r):(this._enqueue(e),y.isUndefined(t)||t(this._get_config("verbose")?{status:-1,error:null}:-1),r)},P.prototype._get_config=function(e){return this._mixpanel.get_config(e)},P.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},P.prototype._enqueue=function(e){"$set"in e?this._mixpanel.cookie._add_to_people_queue("$set",e):"$add"in e?this._mixpanel.cookie._add_to_people_queue("$add",e):"$append"in e?this._mixpanel.cookie._add_to_people_queue("$append",e):k.error("Invalid call to _enqueue():",e)},P.prototype._flush=function(e,t,i){var r=this,n=y.extend({},this._mixpanel.cookie._get_queue("$set")),o=y.extend({},this._mixpanel.cookie._get_queue("$add")),a=this._mixpanel.cookie._get_queue("$append");if(y.isUndefined(n)||!y.isObject(n)||y.isEmptyObject(n)||(r._mixpanel.cookie._pop_from_people_queue("$set",n),this.set(n,function(t,i){0==t&&r._mixpanel.cookie._add_to_people_queue("$set",n),y.isUndefined(e)||e(t,i)})),y.isUndefined(o)||!y.isObject(o)||y.isEmptyObject(o)||(r._mixpanel.cookie._pop_from_people_queue("$add",o),this.increment(o,function(e,i){0==e&&r._mixpanel.cookie._add_to_people_queue("$add",o),y.isUndefined(t)||t(e,i)})),!y.isUndefined(a)&&y.isArray(a)&&a.length)for(var c=a.length-1;c>=0;c--){var s=a.pop();r.append(s,function(e,t){0==e&&r._mixpanel.cookie._add_to_people_queue("$append",s),y.isUndefined(i)||i(e,t)})}},y.toArray=y.toArray,y.isObject=y.isObject,y.JSONEncode=y.JSONEncode,y.JSONDecode=y.JSONDecode,y.isEmptyObject=y.isEmptyObject,C.prototype.init=C.prototype.init,C.prototype.disable=C.prototype.disable,C.prototype.track=C.prototype.track,C.prototype.track_links=C.prototype.track_links,C.prototype.track_forms=C.prototype.track_forms,C.prototype.track_pageview=C.prototype.track_pageview,C.prototype.register=C.prototype.register,C.prototype.register_once=C.prototype.register_once,C.prototype.unregister=C.prototype.unregister,C.prototype.identify=C.prototype.identify,C.prototype.alias=C.prototype.alias,C.prototype.name_tag=C.prototype.name_tag,C.prototype.set_config=C.prototype.set_config,
C.prototype.get_config=C.prototype.get_config,C.prototype.get_property=C.prototype.get_property,C.prototype.get_distinct_id=C.prototype.get_distinct_id,C.prototype.toString=C.prototype.toString,A.prototype.properties=A.prototype.properties,A.prototype.update_search_keyword=A.prototype.update_search_keyword,A.prototype.update_referrer_info=A.prototype.update_referrer_info,A.prototype.get_cross_subdomain=A.prototype.get_cross_subdomain,A.prototype.clear=A.prototype.clear,P.prototype.set=P.prototype.set,P.prototype.increment=P.prototype.increment,P.prototype.append=P.prototype.append,P.prototype.track_charge=P.prototype.track_charge,P.prototype.clear_charges=P.prototype.clear_charges,P.prototype.delete_user=P.prototype.delete_user,P.prototype.toString=P.prototype.toString,y.isUndefined(e))return void k.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");if(e.__loaded||e.config&&e.cookie)return void k.error("Mixpanel library has already been downloaded at least once.");if(m<1.1)return void k.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");var T={};y.each(e._i,function(e){var t,i;e&&y.isArray(e)&&(t=e[e.length-1],i=O.apply(this,e),T[t]=i)});var j=function(){y.each(T,function(t,i){"triggermail.lytics"!==i&&(e[i]=t)}),e._=y};if(e.init=function(t,i,r){if(r)e[r]||(e[r]=T[r]=O(t,i,r),e[r]._loaded());else{var n=e;T["triggermail.lytics"]?n=T["triggermail.lytics"]:t&&(n=O(t,i,"triggermail.lytics")),window["triggermail.lytics"]=e=n,j()}},e.init(),y.each(T,function(e){e._loaded()}),u.addEventListener)"complete"==u.readyState?t():u.addEventListener("DOMContentLoaded",t,!1);else if(u.attachEvent){u.attachEvent("onreadystatechange",t);var $=!1;try{$=null==window.frameElement}catch(e){}u.documentElement.doScroll&&$&&i()}y.register_event(window,"load",t,!0)}(window.triggermail.lytics);var prettyPrint=function(){var e={el:function(t,i){var r,n=document.createElement(t);if((i=e.merge({},i))&&i.style){i.style;e.applyCSS(n,i.style),delete i.style}for(r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);return n},applyCSS:function(e,t){for(var i in t)if(t.hasOwnProperty(i))try{e.style[i]=t[i]}catch(e){}},txt:function(e){return document.createTextNode(e)},row:function(t,i,r){r=r||"td";var n,o=e.count(t,null)+1,a=e.el("tr"),c={style:e.getStyles(r,i),colSpan:o,onmouseover:function(){var t=this.parentNode.childNodes;e.forEach(t,function(t){"td"===t.nodeName.toLowerCase()&&e.applyCSS(t,e.getStyles("td_hover",i))})},onmouseout:function(){var t=this.parentNode.childNodes;e.forEach(t,function(t){"td"===t.nodeName.toLowerCase()&&e.applyCSS(t,e.getStyles("td",i))})}};return e.forEach(t,function(t){null!==t&&(n=e.el(r,c),t.nodeType?n.appendChild(t):n.innerHTML=e.shorten(t.toString()),a.appendChild(n))}),a},hRow:function(t,i){return e.row(t,i,"th")},table:function(t,i){t=t||[];var r={thead:{style:e.getStyles("thead",i)},tbody:{style:e.getStyles("tbody",i)},table:{style:e.getStyles("table",i)}},n=e.el("table",r.table),o=e.el("thead",r.thead),a=e.el("tbody",r.tbody);return t.length&&(n.appendChild(o),o.appendChild(e.hRow(t,i))),n.appendChild(a),{node:n,tbody:a,thead:o,appendChild:function(e){this.tbody.appendChild(e)},addRow:function(t,r,n){return this.appendChild(e.row.call(e,t,r||i,n)),this}}},shorten:function(e){return e=e.replace(/^\s\s*|\s\s*$|\n/g,""),e.length>40?e.substring(0,39)+"...":e},htmlentities:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},merge:function(t,i){"object"!=typeof t&&(t={});for(var r in i)if(i.hasOwnProperty(r)){var n=i[r];if("object"==typeof n){t[r]=e.merge(t[r],n);continue}t[r]=n}for(var o=2,a=arguments.length;o<a;o++)e.merge(t,arguments[o]);return t},count:function(e,t){for(var i=0,r=0,n=e.length;r<n;r++)e[r]===t&&i++;return i},thead:function(e){return e.getElementsByTagName("thead")[0]},forEach:function(e,t,i){i||(i=t);for(var r=e.length,n=-1;++n<r&&!1!==i(e[n],n,e););return!0},type:function(e){try{if(null===e)return"null";if(void 0===e)return"undefined";var t=Object.prototype.toString.call(e).match(/\s(.+?)\]/)[1].toLowerCase();return e.nodeType?1===e.nodeType?"domelement":"domnode":/^(string|number|array|regexp|function|date|boolean)$/.test(t)?t:"object"==typeof e?e.jquery&&"string"==typeof e.jquery?"jquery":"object":e===window||e===document?"object":"default"}catch(e){return"default"}},within:function(e){return{is:function(t){for(var i in e)if(e[i]===t)return i;return""}}},common:{circRef:function(i,r,n){return e.expander("[POINTS BACK TO <strong>"+r+"</strong>]","Click to show this item anyway",function(){this.parentNode.appendChild(t(i,{maxDepth:1}))})},depthReached:function(i,r){return e.expander("[DEPTH REACHED]","Click to show this item anyway",function(){try{this.parentNode.appendChild(t(i,{maxDepth:1}))}catch(t){this.parentNode.appendChild(e.table(["ERROR OCCURED DURING OBJECT RETRIEVAL"],"error").addRow([t.message]).node)}})}},getStyles:function(i,r){return r=t.settings.styles[r]||{},e.merge({},t.settings.styles.default[i],r[i])},expander:function(t,i,r){return e.el("a",{innerHTML:e.shorten(t)+' <b style="visibility:hidden;">[+]</b>',title:i,onmouseover:function(){this.getElementsByTagName("b")[0].style.visibility="visible"},onmouseout:function(){this.getElementsByTagName("b")[0].style.visibility="hidden"},onclick:function(){return this.style.display="none",r.call(this),!1},style:{cursor:"pointer"}})},stringify:function(t){var i,r=e.type(t),n=!0;if("array"===r)return i="[",e.forEach(t,function(t,r){i+=(0===r?"":", ")+e.stringify(t)}),i+"]";if("object"==typeof t){i="{";for(var o in t)t.hasOwnProperty(o)&&(i+=(n?"":", ")+o+":"+e.stringify(t[o]),n=!1);return i+"}"}return"regexp"===r?"/"+t.source+"/":"string"===r?'"'+t.replace(/"/g,'\\"')+'"':t.toString()},headerGradient:""},t=function(i,r){r=r||{};var n=e.merge({},t.config,r),o=e.el("div"),a=(t.config,{}),c=!1;t.settings=n;var s={string:function(t){return e.txt('"'+e.shorten(t.replace(/"/g,'\\"'))+'"')},number:function(t){return e.txt(t)},regexp:function(t){var i=e.table(["RegExp",null],"regexp"),r=e.table(),o=e.expander("/"+t.source+"/","Click to show more",function(){this.parentNode.appendChild(i.node)});return r.addRow(["g",t.global]).addRow(["i",t.ignoreCase]).addRow(["m",t.multiline]),i.addRow(["source","/"+t.source+"/"]).addRow(["flags",r.node]).addRow(["lastIndex",t.lastIndex]),n.expanded?i.node:o},domelement:function(t,i){var r=e.table(["DOMElement",null],"domelement"),o=["id","className","innerHTML","src","href"],a=t.nodeName||"";return r.addRow(["tag","&lt;"+a.toLowerCase()+"&gt;"]),e.forEach(o,function(i){t[i]&&r.addRow([i,e.htmlentities(t[i])])}),n.expanded?r.node:e.expander("DOMElement ("+a.toLowerCase()+")","Click to show more",function(){this.parentNode.appendChild(r.node)})},domnode:function(t){var i=e.table(["DOMNode",null],"domelement"),r=e.htmlentities((t.data||"UNDEFINED").replace(/\n/g,"\\n"));return i.addRow(["nodeType",t.nodeType+" ("+t.nodeName+")"]).addRow(["data",r]),n.expanded?i.node:e.expander("DOMNode","Click to show more",function(){this.parentNode.appendChild(i.node)})},jquery:function(e,t,i){return s.array(e,t,i,!0)},object:function(t,i,r){var o=e.within(a).is(t);if(o)return e.common.circRef(t,o,n);if(a[r||"TOP"]=t,i===n.maxDepth)return e.common.depthReached(t,n);var l=e.table(["Object",null],"object"),u=!0;for(var d in t)if(!t.hasOwnProperty||t.hasOwnProperty(d)){var g=t[d],p=e.type(g);u=!1;try{l.addRow([d,s[p](g,i+1,d)],p)}catch(e){window.console&&window.console.log&&console.log(e.message)}}u?l.addRow(["<small>[empty]</small>"]):l.thead.appendChild(e.hRow(["key","value"],"colHeader"));var f=n.expanded||c?l.node:e.expander(e.stringify(t),"Click to show more",function(){this.parentNode.appendChild(l.node)});return c=!0,f},array:function(t,i,r,o){var c=e.within(a).is(t);if(c)return e.common.circRef(t,c);if(a[r||"TOP"]=t,i===n.maxDepth)return e.common.depthReached(t);var l=o?"jQuery":"Array",u=e.table([l+"("+t.length+")",null],o?"jquery":l.toLowerCase()),d=!0,g=0;return o&&u.addRow(["selector",t.selector]),e.forEach(t,function(r,o){if(n.maxArray>=0&&++g>n.maxArray)return u.addRow([o+".."+(t.length-1),s[e.type(r)]("...",i+1,o)]),!1;d=!1,u.addRow([o,s[e.type(r)](r,i+1,o)])}),o||(d?u.addRow(["<small>[empty]</small>"]):u.thead.appendChild(e.hRow(["index","value"],"colHeader"))),n.expanded?u.node:e.expander(e.stringify(t),"Click to show more",function(){this.parentNode.appendChild(u.node)})},function:function(t,i,r){var o=e.within(a).is(t);if(o)return e.common.circRef(t,o);a[r||"TOP"]=t;var c=e.table(["Function",null],"function"),s=(e.table(["Arguments"]),t.toString().match(/\((.+?)\)/)),l=t.toString().match(/\(.*?\)\s+?\{?([\S\s]+)/)[1].replace(/\}?$/,"");return c.addRow(["arguments",s?s[1].replace(/[^\w_,\s]/g,""):"<small>[none/native]</small>"]).addRow(["body",l]),n.expanded?c.node:e.expander("function(){...}","Click to see more about this function.",function(){this.parentNode.appendChild(c.node)})},date:function(t){var i=e.table(["Date",null],"date"),r=t.toString().split(/\s/);return i.addRow(["Time",r[4]]).addRow(["Date",r.slice(0,4).join("-")]),n.expanded?i.node:e.expander("Date (timestamp): "+ +t,"Click to see a little more info about this date",function(){this.parentNode.appendChild(i.node)})},boolean:function(t){return e.txt(t.toString().toUpperCase())},undefined:function(){return e.txt("UNDEFINED")},null:function(){return e.txt("NULL")},default:function(){return e.txt("prettyPrint: TypeNotFound Error")}};return o.appendChild(s[n.forceObject?"object":e.type(i)](i,0)),o};return t.config={expanded:!0,forceObject:!1,maxDepth:3,maxArray:-1,styles:{array:{th:{backgroundColor:"#6DBD2A",color:"white"}},function:{th:{backgroundColor:"#D82525"}},regexp:{th:{backgroundColor:"#E2F3FB",color:"#000"}},object:{th:{backgroundColor:"#1F96CF"}},jquery:{th:{backgroundColor:"#FBF315"}},error:{th:{backgroundColor:"red",color:"yellow"}},domelement:{th:{backgroundColor:"#F3801E"}},date:{th:{backgroundColor:"#A725D8"}},colHeader:{th:{backgroundColor:"#EEE",color:"#000",textTransform:"uppercase"}},default:{table:{borderCollapse:"collapse",width:"100%"},td:{padding:"5px",fontSize:"12px",backgroundColor:"#FFF",color:"#222",border:"1px solid #000",verticalAlign:"top",fontFamily:'"Consolas","Lucida Console",Courier,mono',whiteSpace:"nowrap"},td_hover:{},th:{padding:"5px",fontSize:"12px",backgroundColor:"#222",color:"#EEE",textAlign:"left",border:"1px solid #000",verticalAlign:"top",fontFamily:'"Consolas","Lucida Console",Courier,mono',backgroundImage:e.headerGradient,backgroundRepeat:"repeat-x"}}}},t}();jQuery.extend(triggermail,function(){var e=function(e){var t=triggermail.lytics.get_property("ch"),i=triggermail.util.hashCode(JSON.stringify(e));return i!=t&&(triggermail.lytics.register({ch:i.toString()},365),triggermail.track("identify",{customer:e})),e};return{track:function(e,t){var i=jQuery.extend({},t),r=triggermail.lytics.cookie.props;r.distinct_id&&jQuery.extend(t,{distinct_id:r.distinct_id}),delete t.ch;try{t.url=window.location.href.slice(0,899),t.url.indexOf("s.thebrighttag")>-1&&delete t.url}catch(e){}if("unsubscribe"==e||"optin"==e||"resubscribe"==e){if(!i.email)return;t.email=i.email}try{t.integration_version=1557262464}catch(e){}"page_view"!=e&&("true"==triggermail.util.cookie.get("tm_debug")?triggermail.lytics.track(e,t,this.track_callback(e,t)):triggermail.lytics.track(e,t)),triggermail.lytics.get_distinct_id()&&(t.distinct_id=triggermail.lytics.get_distinct_id());try{!0===triggermail.integ.debug&&console.debug(e,t)}catch(e){}},report_to_insanetiego:function(e,t){if("true"===triggermail.util.cookie.get("tm_debug")){0===$("#insanetiego").length&&triggermail.insanetiego.inject_div();var i=prettyPrint(t,{styles:{array:{th:{display:"none"}},object:{th:{display:"none"}},default:{th:{display:"none"}}}});$("#insanetiego").append("<p><b>Event: "+e+"</b></p>"),$("#insanetiego").append(i),$.each(t.products,function(e,t){if(t.image&&$("<img/>").attr("src",t.image).load(function(){i={w:this.width,h:this.height},$("#insanetiego").append("<p><b>Image size: width-"+i.w+" height-"+i.h+"<b></p>"),$("#insanetiego").append('<img src="'+t.image+'" height="100" width="100" />')}),t.alternative_image){var i={w:this.width,h:this.height};$("<img/>").attr("src",t.alternative_image).load(function(){i={w:this.width,h:this.height},$("#insanetiego").append("<p><b>Alternative Image size: width-"+i.w+" height-"+i.h+"<b></p>"),$("#insanetiego").append('<img src="'+t.alternative_image+'" height="100" width="100"/>')})}})}},validate:function(e){"true"===triggermail.util.cookie.get("tm_debug")&&(e?$("#insanetiego").append('<p><b style="color:#64E813;">Event is ok</b></p>'):$("#insanetiego").append('<p><b style="color:#E60508;">The Event Seems Broken</b></p>'))},track_callback:function(e,t){return function(i){triggermail.report_to_insanetiego(e,t),triggermail.validate(i)}},add_to_cart:function(e){return this.track("add_to_cart",{products:[e]})},remove_from_cart:function(e){return this.track("remove_from_cart",{products:[e]})},wishlist:function(e){return this.track("wishlist",{products:[e]})},view_cart:function(e){return this.track("viewed_cart",e)},stop:function(e){return this.track("stop",e)},page:function(e){return this.track("page_view",e)},purchase:function(e){return this.track("purchase",e)},checkout_start:function(e){return this.track("checkout_start",e)},view:function(e,t){triggermail.integ.salt_products&&(e.salt=Math.random().toString(36).replace(".",""));var i=jQuery.extend(t||{},{products:[e]});return this.track("viewed_product",i)},view_content:function(e,t){triggermail.integ.salt_products&&(e.salt=Math.random().toString(36).replace(".",""));var i=jQuery.extend(t||{},{contents:[e]});return this.track("viewed_content",i)},search:function(e){return this.track("search",e)},browse_category:function(e){return this.track("browse_category",{browse_properties:e})},identify:function(t){return e(t)},subscribe:function(t){return t.source="email signup",e(t)},resubscribe:function(e){return this.track("resubscribe",e)},unsubscribe:function(e){return this.track("unsubscribe",e)},optin:function(e){return this.track("optin",e)},customer_patch:function(e){return this.track("customer_patch",{customer:e})},patch:function(e){return this.track("patch",e)},merge:function(e){return this.track("merge",e)},custom:function(e,t){return this.track(e,t)},init:function(e){},exception:function(e){var t={};jQuery.extend(t,triggermail.lytics._.info.properties());try{t.url=window.location.href,t.url.indexOf("s.thebrighttag")>-1&&delete t.url,t.message=e.message}catch(e){}t.error=e,this.track("exception",t)},EMAIL_ADDRESS_PROPERTY:"email_address",PAGE_VIEW:"page_view",MAX_PROPERTY_LENGTH:1024}}()),triggermail.identifySource=function(){return{ACCOUNT_REGISTER:"account register",ACCOUNT_LOGIN:"account login",EMAIL_CAPTURE_POPUP:"email capture popup",EMAIL_SIGNUP:"email signup",SITE_VARIABLE:"site variable",CHECKOUT_FLOW:"checkout flow",CUSTOM:"custom",ESP_EMAIL_APPEND:"esp email append",OBEM_EMAIL_APPEND:"obem email append",JUSTUNO:"justuno",BLUECORE_PURCHASE_PIXEL:"bluecore purchase pixel"}}(),triggermail.util=function(){return{price:function(e){var t=String(e).replace(/[^0-9\.]/g,"").split("."),i=t[0],r=(t[1]||"").slice(0,2),n=i+"."+r;return parseFloat(n)},unique:function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;return jQuery.map(t,function(e,t){return t})},slugify:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},serializeForm:function(e){var t={},i=e.serializeArray();return $.each(i,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},getUrlParam:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),r=i.exec(window.location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))},isMobile:function(){var e=!1,t=["iphone","ipad","android","blackberry","nokia","opera mini","windows mobile","windows phone","iemobile"];for(var i in t)navigator.userAgent.toLowerCase().indexOf(t[i].toLowerCase())>0&&(e=!0);return e},getParamFromQueryString:function(e,t){return decodeURI((RegExp(t+"=(.+?)(&|$)").exec(e)||[,null])[1])},trimString:function(e,t){return jQuery.trim(e).substring(0,t)},isAnonymousUser:function(){var e=triggermail.lytics.get_property(triggermail.core.EMAIL_ADDRESS_PROPERTY);return!this.isValidEmail(e)},emRegex:/\S+@\S+\.\S+/,isValidEmail:function(e){return triggermail.util.emRegex.test(e)},validateAndIdentify:function(e,t,i){var r=(e||"").trim();this.isValidEmail(r)&&triggermail.identify({email:r,source:t,source_detail:i})},findEmail:function(e,t){try{return void 0===t&&(t=triggermail.util.emRegex),t.exec(e).pop()}catch(e){}},hashCode:function(e){var t,i,r=0;if(0==e.length)return r;for(t=0;t<e.length;t++)i=e.charCodeAt(t),r=(r<<5)-r+i,r&=r;return r},productHash:function(e){var t=this.sanitizeProductName(e[TriggerMail.PRODUCT_NAME_PROPERTY]);return this.hashCode(t)},_getbyte64:function(e,t){_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=_ALPHA.indexOf(e.charAt(t));if(-1===i)throw"Cannot decode base64";return i},b64decode:function(e){var t,i,r=0,n=e.length,o=[];if(e=String(e),0===n)return e;if(n%4!=0)throw"Cannot decode base64";for("="===e.charAt(n-1)&&(r=1,"="===e.charAt(n-2)&&(r=2),n-=4),t=0;t<n;t+=4)i=this._getbyte64(e,t)<<18|this._getbyte64(e,t+1)<<12|this._getbyte64(e,t+2)<<6|this._getbyte64(e,t+3),o.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(r){case 1:i=this._getbyte64(e,t)<<18|this._getbyte64(e,t+1)<<12|this._getbyte64(e,t+2)<<6,o.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=this._getbyte64(e,t)<<18|this._getbyte64(e,t+1)<<12,o.push(String.fromCharCode(i>>16))}return o.join("")},wrapEvent:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){try{return e.apply(this,t.concat(Array.prototype.slice.call(arguments,0)))}catch(e){triggermail.exception(e)}}},removeURLParam:function(e,t){return triggermail.util.updateURLParams(e,t,!1)},keepURLParam:function(e,t){return triggermail.util.updateURLParams(e,t,!0)},updateURLParams:function(e,t,i){var r,n=e.split("?")[0],o=[],a=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==a){o=a.split("&");for(var c=o.length-1;c>=0;c-=1)r=o[c].split("=")[0],i?jQuery.isArray(t)?-1==t.indexOf(r)&&o.splice(c,1):r!=t&&o.splice(c,1):jQuery.isArray(t)?t.indexOf(r)>-1&&o.splice(c,1):r==t&&o.splice(c,1);n+=o.length>0?"?"+o.join("&"):""}return n},getArrayElementFromQueryString:function(e,t){var i=[];e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");for(var r=t+"=([^&#]+)",n=new RegExp(r,"ig");;){var o=n.exec(e);if(!o||!o[1])break;i.push(o[1])}return i.length?1==i.length?i[0]:i:null},executeOnLoad:function(e,t,i,r,n){var o=function(e,t){try{var i=t.shift();if(void 0!==e[i]&&e[i])return t.length>0?o(e[i],t):e[i]}catch(e){}return null},i=i||3,r=r||500,n=n||!1;if(n&&jQuery(e).length>0||o(window,e.split(".")))try{t()}catch(e){}else if(i>0)try{i--,setTimeout(function(){triggermail.util.wrapEvent(function(){triggermail.util.executeOnLoad(e,t,i,r,n)},e,t,i,r,n)()},r)}catch(e){}},sanitizeSearchTerm:function(e){return e.replace(/[^a-z\d\s:]+/gi,"")},registerAndMergeOpaqueId:function(e){if(void 0!==e&&e){if(!triggermail.lytics.cookie.props.tm_merged){var t=triggermail.lytics.cookie.props.distinct_id;triggermail.track("merge",{merge:{source:t,destination:e}}),triggermail.lytics.cookie.props.tm_merged=!0,triggermail.lytics.cookie.props.distinct_id=e,triggermail.lytics.cookie.save()}}}}}(),triggermail.util.cookie=triggermail.lytics._.cookie,triggermail.util.encode=triggermail.lytics._.JSONEncode,triggermail.util.decode=triggermail.lytics._.JSONDecode,triggermail.demo=function(){var e=triggermail.lytics.get_distinct_id();-1==e.indexOf("live_demo")&&(triggermail.lytics._register_single("distinct_id","live_demo_"+e),e=triggermail.lytics.get_distinct_id()),triggermail.lytics.cookie.update_config({live_demo:!0,cookie_expiration:1});var t=triggermail.Partner.keys.lytics.p,i="http://www.bluecore.com/api/templates/live_demo/"+t+"/"+e;window.open(i)},triggermail.event_stream=function(){var e=triggermail.lytics.get_distinct_id();-1==e.indexOf("event_stream")&&(triggermail.lytics._register_single("distinct_id","event_stream_"+e),e=triggermail.lytics.get_distinct_id()),triggermail.lytics.cookie.update_config({event_stream:!0,cookie_expiration:1});var t=triggermail.Partner.keys.lytics.p,i="http://www.bluecore.com/api/templates/event_stream/"+t+"/"+e;window.open(i)},triggermail.util.walk=function(e,t){for(t(e),e=e.firstChild;e;)walk(e,t),e=e.nextSibling},triggermail.util.walkUntil=function(e,t,i){if(ret=t(e),!0===i(ret))return ret;for(e=e.firstChild;e;)walk(e,t),e=e.nextSibling},triggermail.insanetiego=function(){return{inject_div:function(){$("body").append('<div id="insanetiego" style="position:fixed;bottom:0;width:100%;background:#D8E7ED;height:300px;overflow:scroll;z-index:2000;border-top-style:solid;border-top-width:5px;"></div>')},remove_div:function(){$("#insanetiego").remove()},debug:function(){triggermail.util.cookie.set("tm_debug",!0),triggermail.integ.debug=!0,this.inject_div()},undebug:function(){triggermail.util.cookie.set("tm_debug",!1),triggermail.integ.debug=!1}}}(),triggermail.core={},triggermail.core.sanitizer=function(){function e(e){return t(e)?e:null}function t(e){return/\S+@\S+\.\S+/.test(e)}return{sanitize:function(t,i){return"email"==t?e(i):i||""}}}(),triggermail.persist=function(){var e=function(){return triggermail.lytics.cookie.props||{}},t=function(e,t){triggermail.lytics.cookie.props[e]=t,triggermail.lytics.cookie.save()};return{setMode:function(e){},sync:function(){},props:function(){return e()},read_prop:function(t){return e()[t]||null},write_prop:function(e,i){t(e,i)}}}(),triggermail.integ=function(){return{init:function(){if(!triggermail.util.getUrlParam("bluecore_do_not_track")){void 0!==triggermail.Partner.init?triggermail.Partner.init():triggermail.integ.partnerInit();try{triggermail.integ.checkLoop()}catch(e){}}},partnerInit:function(e){var t=triggermail.Partner;if(void 0!==e||!triggermail.lytics._.dom_query(".translated-rtl, .translated-rtl, #goog-gt-tt").length&&!triggermail.lytics._.dom_query('meta[http-equiv="X-Translated-By"]').length){try{t.trackProductView()}catch(e){e.location="trackProductView",triggermail.exception(e)}try{t.trackAddToCart()}catch(e){e.location="trackAddToCart",triggermail.exception(e)}try{t.trackCheckout()}catch(e){e.location="trackCheckout",triggermail.exception(e)}try{t.watchEmail()}catch(e){e.location="watchEmail",triggermail.exception(e)}if(t.hasOwnProperty("trackRemoveFromCart"))try{t.trackRemoveFromCart()}catch(e){e.location="trackRemoveFromCart",triggermail.exception(e)}if(t.hasOwnProperty("trackCheckoutStart"))try{t.trackCheckoutStart()}catch(e){e.location="trackCheckoutStart",triggermail.exception(e)}if(t.hasOwnProperty("trackUnsubscribe"))try{t.trackUnsubscribe()}catch(e){e.location="trackUnsubscribe",triggermail.exception(e)}if(t.hasOwnProperty("trackSubscribe"))try{t.trackSubscribe()}catch(e){e.location="trackSubscribe",triggermail.exception(e)}if(t.hasOwnProperty("trackSearch"))try{t.trackSearch()}catch(e){e.location="trackSearch",triggermail.exception(e)}if(t.hasOwnProperty("trackBrowseCategory"))try{t.trackBrowseCategory()}catch(e){e.location="trackBrowseCategory",triggermail.exception(e)}if(t.hasOwnProperty("trackWishlist"))try{t.trackWishlist()}catch(e){e.location="trackWishlist",triggermail.exception(e)}if(t.hasOwnProperty("trackContentView"))try{t.trackContentView()}catch(e){e.location="trackContentView",triggermail.exception(e)}if(t.hasOwnProperty("trackStop"))try{t.trackStop()}catch(e){e.location="trackStop",triggermail.exception(e)}if(triggermail.Partner.hasOwnProperty("trackCustom"))try{triggermail.Partner.trackCustom()}catch(e){triggermail.exception(e)}}},checkLoop:function(){if(void 0===triggermail.Partner.disableEmailAppendPickup||0==triggermail.Partner.disableEmailAppendPickup){for(var e=window.location.search.split("&"),t=0;t<e.length;t++){try{var i=triggermail.util.b64decode(decodeURIComponent(e[t].split("=").slice(1).join("=")))}catch(e){}if(i&&/^(([^<>{}()\[\]\.,;:\s@\"]+(\.[^<>{}()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>{}()[\]\.,;:\s@\"]+\.)+[^<>{}()[\]\.,;:\s@\"]{2,})/.test(i)&&triggermail.util.isValidEmail(i))return void triggermail.identify({email:i,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"encoded"})}var r=triggermail.util.getUrlParam("tme");if(r.length>0)return void triggermail.identify({email:r,source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"tme"},!0);var r=decodeURIComponent(location.search).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)||decodeURIComponent(location.hash).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(r&&triggermail.util.isValidEmail(r[0]))return void triggermail.identify({email:r[0],source:triggermail.identifySource.ESP_EMAIL_APPEND,source_detail:"plain text"})}var n=triggermail.util.getUrlParam("obem");if(void 0!==n&&""!=n&&triggermail.identify({obem:n,source:triggermail.identifySource.OBEM_EMAIL_APPEND}),triggermail.lytics._.dom_query("#bluecore_purchase_pixel").length>0&&void 0!==triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0]){var o=triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0].src,r=triggermail.util.getParamFromQueryString(o,"email");triggermail.identify({email:r,source:triggermail.identifySource.BLUECORE_PURCHASE_PIXEL})}triggermail.lytics._.addEvent(document,"bc:identify",triggermail.util.wrapEvent(function(e,t){triggermail.util.isValidEmail(t.email)&&triggermail.identify({email:t.email,source:triggermail.identifySource.CUSTOM,source_detail:"dom event"})}))}}}(),triggermail.integ.ProductFetcher=__tmClass.extend({name:function(){return this._name},readOg:function(e){},category:function(){return this._category},color:function(){return this._color},size:function(){return this._size},price:function(){return this._price},brand:function(){return this._brand},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},out_of_stock:function(){return!1},tags:function(){return this._tags},to_dict:function(){try{var e={name:triggermail.core.sanitizer.sanitize("name",this.name()),category:triggermail.core.sanitizer.sanitize("category",this.category()),size:triggermail.core.sanitizer.sanitize("size",this.size()),price:triggermail.core.sanitizer.sanitize("price",this.price()),brand:triggermail.core.sanitizer.sanitize("brand",this.brand()),id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),url:triggermail.core.sanitizer.sanitize("url",this.url()),out_of_stock:this.out_of_stock(),tags:this.tags(),color:triggermail.core.sanitizer.sanitize("color",this.color())};for(var t in e)""!==e[t]&&0!=e[t]||"out_of_stock"==t||delete e[t];return triggermail.lytics._.extend(e,this.extra_props()),e}catch(e){e.location="product_fetcher",triggermail.exception(e)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.ContentFetcher=__tmClass.extend({name:function(){return this._name},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},title:function(){return this._title},to_dict:function(){try{var e={id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),name:triggermail.core.sanitizer.sanitize("name",this.name()),title:triggermail.core.sanitizer.sanitize("title",this.title()),url:triggermail.core.sanitizer.sanitize("url",this.url())};for(var t in e)""!==e[t]&&0!=e[t]||delete e[t];return triggermail.lytics._.extend(e,this.extra_props()),e}catch(e){e.location="content_fetcher",triggermail.exception(e)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}}),triggermail.integ.initServices=function(){triggermail.lytics.init(triggermail.integ.keys.lytics),triggermail.lytics=window["triggermail.lytics"],triggermail.lytics.set_config({save_referrer:!1,store_google:!1,debug:triggermail.integ.debug}),triggermail.persist.sync()},triggermail.util=triggermail.util||{},triggermail.lytics._.extend(triggermail.util,{getNestedProp:function(e,t){try{if("string"!=typeof e)return;var i=t||window,r=e.split(".");if(0===r.length)return;for(var n=0,o={};n<r.length&&void 0!==o;)o=function(e,t,r){var n=t[r];return 0===r?i[n]:e[n]}(o,r,n),n+=1;return o}catch(e){}},listenAndIdentify:function(e,t,i,r,n,o){try{jQuery(document).on(r||"focusout",e,function(){var e=this;triggermail.util.wrapEvent(function(){var r=jQuery(n||e).val(),a=triggermail.identifySource[t];a&&(triggermail.util.validateAndIdentify(r,a,o),i&&triggermail.custom("welcome_qualifier",{source:a}))})()})}catch(e){}},executeOnTruthy:function(e,t,i,r,n){if("function"!=typeof e)throw"first argument should be a function to evaluate";if("function"!=typeof t)throw"second argument should be a function to execute if the first function evaluates to truthy";var o;o="number"==typeof i&&i>=1&&Math.floor(i)===i?i:3;var a;a="number"==typeof r&&r>100?r:500;var c;c="function"==typeof n?n:function(){},function i(r){var n=r;setTimeout(function(){e()?t():--n?i(n):c()},a)}(o)},registerCoom:function(e){var t=triggermail.lytics.get_property("tm_coom"),i=triggermail.lytics.get_property("email");if(!(i&&triggermail.util.isValidEmail(i)||t))return triggermail.persist.write_prop("tm_coom",!0),triggermail.track("identify",{customer:e}),e},getDataLayerObj:function(e,t,i){var r=window[t]||window.dataLayer;if(void 0!==r&&void 0!==e&&(void 0===i||"boolean"==typeof i))for(var n=function(e,t){return t?e.length-1:0}(r,i);function(e,t,i){return i?e>=0:e<t.length}(n,r,i);n=function(e,t){return t?e-1:e+1}(n,i)){var o=r[n];if(void 0!==o[e])return o}},euroPrice:function(e){try{var t=e.replace(/[^0-9.,]/g,"");if(/[0-9]+,[0-9]{2}$/.test(t)){var i=t.substr(0,t.length-3).replace(/\./g,"")+"."+t.substr(t.length-2);return parseFloat(i)}return parseFloat(t.replace(/,/g,""))}catch(e){}},handleS7Image:function(e,t,i,r){var n=e,o="wid="+(t||"920"),a="qlt="+(i||"90"),c=[o,a,"op_sharpen=1"];return"object"==typeof r&&r.length>0&&(c=c.concat(r)),-1===n.indexOf("?")&&(n+="?"),-1===n.indexOf("$")&&(n+="$"),n.replace(/\$.*/g,c.join("&"))}}),function(){var e,t,i=[].indexOf;null==(e=String.prototype).endsWith&&(e.endsWith=function(e){return""===e||this.slice(-e.length)===e}),null==(t=Array.prototype).bc_unique&&(t.bc_unique=function(){var e,t,i,r,n,o;for(i={},t=e=0,r=this.length;0<=r?e<r:e>r;t=0<=r?++e:--e)i[this[t]]=this[t];n=[];for(t in i)o=i[t],n.push(o);return n}),triggermail.angularFetcher=triggermail.integ.ProductFetcher.extend({name:function(){try{return STAPLES.angularData.selectedSKU.metadata.name.trim()}catch(e){e}},id:function(){try{return STAPLES.angularData.selectedSKU.metadata.partnumber.trim()}catch(e){e}},url:function(){try{return"http://www.staples.com/product_"+this.id()}catch(e){e}},brand:function(){try{return STAPLES.angularData.selectedSKU.metadata.mfname.trim()}catch(e){e}},category:function(){try{return STAPLES.angularData.selectedSKU.base_category.category.name.trim()}catch(e){e}},image:function(){var e,t;try{if(e="",e=(null!=(t=$("#STP--Product-Image img"))?t.length:void 0)?$("#STP--Product-Image img").attr("ng-src").replace("$splssku$","wid=180&hei=180").trim():$(".bigImgContainer img").attr("ng-src").replace("$splssku$","wid=180&hei=180").trim(),-1===e.indexOf("selectedImage"))return e}catch(e){e}},price:function(){var e;try{return 0===STAPLES.priceData.pricing.priceOfLowestPriceSKU.lowestPrice?triggermail.util.price(STAPLES.priceData.pricing.finalPriceText):(e=$('.pricing-details span.stp--price-discounted :not(".ng-hide")').text().trim(),triggermail.util.price(e))}catch(e){e}},out_of_stock:function(){
return Analytics.tracking.item.oos},extra_props:function(){var e,t,i,r,n,o,a,c,s,l,u,d,g,p,f;u={};try{STAPLES.angularData.selectedSKU.breadcrumb&&$.each(STAPLES.angularData.selectedSKU.breadcrumb,function(e,t){return u["breadcrumb_"+e.toString()]=t.displayName,u["breadcrumb_"+e.toString()+"_id"]=t.id})}catch(e){e}try{STAPLES.angularData.selectedSKU.review&&(u.number_of_reviews=STAPLES.angularData.selectedSKU.review.count,u.rating=STAPLES.angularData.selectedSKU.review.rating)}catch(e){e}try{for(f=!1,d=STAPLES.priceData.pricing.promotion,r=0,n=d.length;r<n;r++)t=d[r],"Special Buy"===t.name&&"PROMO_OFFER_EXPIRATION"===t.type_name&&(u.is_special_buy=!0,u.expiration_date=t.text,e=t.text.match(/[0-9\/]+/)[0].split("/"),i=new Date(e[2],e[0]-1,e[1]),a=("0"+i.getUTCDate()).slice(-2),c=("0"+(i.getUTCMonth()+1)).slice(-2),u.raw_expiration_date=i.getUTCFullYear()+"-"+c+"-"+a,f=!0);f||((null!=(g=$(".promoMessage"))?g.length:void 0)?(u.is_special_buy=$("#skuPromoZone").text().toLowerCase().indexOf("special buy")>-1,u.expiration_date=$(".promoMessage h4").last().text()):(null!=(p=$(".item-promo"))?p.length:void 0)?(u.is_special_buy=$(".item-promo h5").text().toLowerCase().indexOf("special buy")>-1||$(".item-promo h5").text().toLowerCase().indexOf("per customer")>-1,u.expiration_date=$('[ng-hide="priceWarrantyData.logic.promotion.clearancePromo"]').text()):(u.is_special_buy=!1,u.expiration_date="Offer Expired"))}catch(e){e,u.is_special_buy=!1,u.expiration_date="Offer Expired"}try{o=$(".pricing-details span.stp--price-original").text().trim()||$(".priceStrike").eq(0).text().trim(),null==o||""===o||isNaN(triggermail.util.price(o))||(u.on_sale=this.price()<triggermail.util.price(o),u.original_price=u.on_sale?triggermail.util.price(o):this.price())}catch(e){e,u.on_sale=!1,u.original_price=this.price()}u.fetcher="Angular",u.subsite="staples";try{s=[],jQuery("div.prod-detail #CompatiblePrinters tr").each(function(e,t){var i;if(null!=(i=jQuery(this).find("td").last().text()))return i.split(",").forEach(function(e){return s.push(e.trim().replace(/\s/g,"_"))})}),l=s.join(", "),l.indexOf(",")>-1&&(l.length>700&&(l=l.substring(0,700),l=l.substring(0,l.lastIndexOf(","))),u.related_printers=l)}catch(e){e}return u}}),triggermail.nonAngularFetcher=triggermail.integ.ProductFetcher.extend({name:function(){var e,t;try{return(null!=(e=window.br_data)?e.prod_name:void 0)||(null!=(t=jQuery("div.product-info-container h1.product-title"))?t.text():void 0)}catch(e){e}},id:function(){var e;try{return window.currentSKUNbr||(null!=(e=window.br_data)?e.prod_id:void 0)}catch(e){e}},url:function(){try{return window.location.protocol+"//www.staples.com/product_"+this.id()}catch(e){e}},brand:function(){},category:function(){var e;try{return null!=(e=window.br_data)?e.cat:void 0}catch(e){e}},image:function(){try{return jQuery(".image-container .hero-image-container img").eq(0).attr("src")}catch(e){e}},price:function(){var e;try{return e=$(".product-info-container .info-container #mmx-sku-finalPrice").eq(0).text(),triggermail.util.price(e)}catch(e){e}},out_of_stock:function(){try{return $(".product-info-container .info-container .out-of-stock").length>0}catch(e){e}},extra_props:function(){var e,t,i,r,n,o,a,c,s,l,u,d,g,p,f;p={};try{c=$(".product-info-container .info-container .sku-offer-detail-section #stp-sku-reg-price").eq(0).text(),c=triggermail.util.price(c),c&&c>this.price()?(p.on_sale=!0,p.original_price=c):(p.on_sale=!1,p.original_price=this.price())}catch(e){e}try{p.super_category=triggermail.util.getNestedProp("superCategory.value"),p.super_category_id=triggermail.util.getNestedProp("superCategory.id")}catch(e){e}try{for(e=jQuery(".stp--breadcrumbs li #breadCrumbDetails"),i=0;i<=e.length&&i<5;)p["breadcrumb_"+i.toString()]=e.eq(i).attr("scValue"),i++}catch(e){e}try{for(s=[],g=jQuery("div.product-description"),r=0,o=g.length;r<o;r++)if(t=g[r],"Printer Compatibility"===jQuery(t).text())for(u=jQuery(t).siblings(".stp--prod-detail").find("tbody tr"),n=0,a=u.length;n<a;n++)f=u[n],null!=(d=jQuery(f).find("td").last().text())&&d.split(",").forEach(function(e){return s.push(triggermail.util.hashCode(e.trim()))});s.length>0&&(l=s.join(", "),l.length>700&&(l=l.substring(0,700),l=l.substring(0,l.lastIndexOf(","))),p.related_printers=l)}catch(e){e}return p.fetcher="Non-Angular",p.subsite="staples",p}}),triggermail.subSite=function(){return{designProductView:function(e){var t;if(window.location.href.indexOf("design.staples")>-1&&(window.location.pathname.indexOf("product")>-1||window.location.pathname.indexOf("banner-configurator")>-1))return t=triggermail.util.keepURLParam(e.product.image),triggermail.view({id:e.product.id,name:e.product.name,url:e.product.url,image:t,price:e.product.price,category:e.product.category,subsite:"design",out_of_stock:!1})},designViewCart:function(e){var t,i,r,n,o;if(window.location.href.indexOf("design.staples")>-1){for(t=[],o=e.cart,r=0,n=o.length;r<n;r++)i=o[r],t.push({id:i.id});return triggermail.view_cart({products:t})}},designCheckout:function(e){return triggermail.purchase({order_id:e.purchase.order_id,email:e.purchase.email,total:e.purchase.total,products:e.purchase.Products,source:"design.com dataReady"})},designCategorySearch:function(e){var t;return t=e.search.category.replace(/[:-]/g," "),triggermail.search({search_term:"subsite:design "+t})}}}(),triggermail.Partner=function(){return{dataReady:function(e,t){try{switch(e){case"product":return triggermail.subSite.designProductView(t);case"search":return triggermail.subSite.designCategorySearch(t);case"cart":return triggermail.subSite.designViewCart(t);case"purchase":return triggermail.subSite.designCheckout(t)}}catch(e){e}},trackWeeklyAd:function(){return jQuery("div#BodyContent").scope().$watch(function(){return jQuery(".spinningLoader:visible").length},function(e,t){if(t>0&&0===e)return jQuery(".gridUnitContain").on("click",function(){var e;if(null!=(e=jQuery(this).scope().listing.OnlineProductCode)&&e)return triggermail.view({id:e},{partial:!0})}),setTimeout(function(){return jQuery("div.L1").on("click",function(){var e;if(null!=(e=jQuery(this).find("span.description").text().trim()))return e=triggermail.util.sanitizeSearchTerm(e),triggermail.search({search_term:e})})},1e3),jQuery("div.smallSquare").on("click",function(){var e;if(jQuery(this).find("div.descriptionText").length&&null!=(e=jQuery(this).find("div.descriptionText").text().trim()))return e=triggermail.util.sanitizeSearchTerm(e),triggermail.search({search_term:e})})})},customerNegotiatedPricing:function(){var e,t,i,r,n,o,a,c,s;try{if(((null!=(r=STAPLES.priceData)&&null!=(n=r.pricing)?n.displayNegotiatedPricingMessage:void 0)||(null!=(o=STAPLES.priceData)&&null!=(a=o.pricing)&&null!=(c=a.customerTier)?c.isNegotiatedPricingApplied:void 0))&&STAPLES.priceData.pricing.promotion)for(s=STAPLES.priceData.pricing.promotion,e=0,t=s.length;e<t;e++)if(i=s[e],null!=i.text&&"Business Exclusive Price"===i.text)return"BEP"}catch(e){e}return"None"},trackProductView:function(){var e,t,i,r;if(window.location.hostname.indexOf("design.staples.com")>-1)return void jQuery("div.banner-card").each(function(e,t){var i,r;if(i=jQuery(t).scope().option,"Outdoor"===(r=i.key)||"Indoor"===r)return jQuery(t).on("click",function(){var e;return e={id:"design_"+triggermail.util.slugify(i.name),name:i.name,url:window.location.href,image:window.location.origin+i.imgUrl,price:i.basePrice,category:"Banner",subsite:"design",out_of_stock:!1},triggermail.subSite.designProductView({product:e})})});if(window.location.hostname.indexOf("weeklyad.staples.com")>-1)return void(window.location.href.toLowerCase().indexOf("staplessd/weeklyad")>-1&&triggermail.util.executeOnLoad("angular",triggermail.Partner.trackWeeklyAd,3,1e3));if(window.location.href.indexOf("m.staples")>-1&&window.location.pathname.indexOf("/product_")>-1)try{t=__NEXT_DATA__.query.sku,(null!=t?t.length:void 0)&&void 0!==t&&triggermail.view({id:t},{partial:!0})}catch(e){e}return-1===window.location.href.indexOf("m.staples")&&window.location.pathname.indexOf("/product_")>-1&&void 0!==STAPLES.angularData&&(e=new triggermail.angularFetcher,(null!=(r=e.id())?r.length:void 0)&&void 0!==e.id()&&("BEP"===triggermail.Partner.customerNegotiatedPricing()?(i={id:e.id(),bep_price:e.price().toString()},triggermail.view(i,{partial:!0,source:"bep_partial"}),triggermail.patch({products:[i]})):triggermail.view(e.to_dict()))),triggermail.util.executeOnTruthy(function(){return"undefined"!=typeof br_data&&null!==br_data?br_data.prod_id:void 0},function(){var i;if(-1===window.location.href.indexOf("m.staples")&&window.location.pathname.indexOf("/product_")>-1&&void 0===STAPLES.angularData&&(e=new triggermail.nonAngularFetcher,(null!=(i=e.id())?i.length:void 0)&&void 0!==e.id()&&triggermail.view(e.to_dict())),window.location.pathname.indexOf("outofstock")>-1&&(t=triggermail.util.getParamFromQueryString(window.location.href,"partNumber"),(null!=t?t.length:void 0)&&void 0!==t))return triggermail.view({id:t,out_of_stock:!0},{partial:!0})},6,500)},trackAddToCart:function(){var e,t,i,r;if(!(window.location.hostname.indexOf("design.staples.com")>-1||window.location.hostname.indexOf("weeklyad.staples.com")>-1)){if($(document).ajaxComplete(function(e,t,i){return triggermail.util.wrapEvent(function(){var e,t,r;if(i.url.indexOf("/api/cart/")>-1&&i.data&&(r=JSON.parse(i.data),t=r.items,(null!=t?t.length:void 0)&&void 0!==t))return e=t[0].itemId,triggermail.add_to_cart({id:e})},i)()}),$(document).ajaxComplete(function(e,t,i){return triggermail.util.wrapEvent(function(){var e,t;if(i.url.indexOf("addtobag")>-1&&(t=triggermail.util.getParamFromQueryString(i.data,"item"),e=JSON.parse(t).id,(null!=e?e.length:void 0)&&void 0!==e))return triggermail.add_to_cart({id:e})},i)()}),-1===window.location.href.indexOf("m.staples")&&window.location.pathname.endsWith("yourorder")){try{e=[],t=$(".cart-item a[data-sku]").map(function(){return $(this).attr("data-sku")}).get(),$.each(t.bc_unique(),function(t,i){return e.push({id:i.trim()})}),e.length>0&&triggermail.view_cart({products:e})}catch(e){e}try{i=[],t=$(".cart-item a[data-sku]").map(function(){return $(this).attr("data-sku")}).get(),$.each(t.bc_unique(),function(e,t){return i.push({id:t.trim(),out_of_stock:!1})}),i.length>0&&triggermail.patch({products:i})}catch(e){e}}if(-1===window.location.href.indexOf("m.staples")&&window.location.pathname.endsWith("cart"))try{i=[],t=$(".product-tile__product_tile_model").map(function(){return jQuery(this).text().match(/Item:(.*)\|/)[1].trim()}).get(),$.each(t.bc_unique(),function(e,t){return i.push({id:t.trim(),out_of_stock:!1})}),i.length>0&&triggermail.patch({products:i})}catch(e){e}if(window.location.href.indexOf("m.staples")>-1&&window.location.pathname.endsWith("/cart"))try{if(r=[],$.each(Analytics.tracking.items,function(e,t){return r.push({id:t.s})}),r.length>0)return triggermail.view_cart({products:r})}catch(e){e}}},trackRemoveFromCart:function(){if(window.location.href.indexOf("cart")>-1)return jQuery(document).on("click","span:contains(remove)",function(){var e,t,i;try{if(e=jQuery(this).parents(".product-tile__product_tile_cart").find(".product-tile__product_tile_model").text(),i=e.match(/Item: (\d{6})/),i.length>1)return t=i[1],triggermail.remove_from_cart({id:t})}catch(e){e}})},trackWishlist:function(){var e,t,i,r;if(!(window.location.hostname.indexOf("design.staples.com")>-1||window.location.hostname.indexOf("weeklyad.staples.com")>-1)){try{null!=Analytics.tracking.item.oos&&void 0!==Analytics.tracking.item.oos&&Analytics.tracking.item.oos&&null!=(t=window.currentSKUNbr||(null!=(i=window.br_data)?i.prod_id:void 0))&&t&&triggermail.custom("viewed_out_of_stock",{products:[{id:t}]})}catch(e){e}return window.location.pathname.indexOf("outofstock")>-1&&(e=triggermail.util.getParamFromQueryString(window.location.href,"partNumber"),(null!=e?e.length:void 0)&&void 0!==e&&triggermail.custom("viewed_out_of_stock",{products:[{id:e}]})),-1===window.location.href.indexOf("m.staples")&&window.location.pathname.indexOf("listDetails")>-1&&(r=[],$(".stp--product-list .product-info [sku]").each(function(e,t){var i;if(void 0!==(i=$(t).attr("sku"))&&null!==i&&""!==i)return r.push({id:i})}),r.length>0)?triggermail.custom("viewed_favorite_product",{products:r}):void 0}},trackCheckout:function(){var e,t,i,r,n;if(!(window.location.hostname.indexOf("design.staples.com")>-1)&&!(window.location.hostname.indexOf("weeklyad.staples.com")>-1)&&(i=function(){var e,i,r,n,o,a,c;i={},r=[];try{return("undefined"!=typeof analyticsRaw&&null!==analyticsRaw?analyticsRaw.length:void 0)&&triggermail.util.isValidEmail(analyticsRaw[0].emailId)?e=analyticsRaw[0].emailId:null!=Analytics.global.visitor.email&&triggermail.util.isValidEmail(Analytics.global.visitor.email)?e=Analytics.global.visitor.email:(null!=(n=$("#easyorderConfContent").text().match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)[0])?n.length:void 0)&&(e=$("#easyorderConfContent").text().match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)[0]),$.each(Analytics.tracking.items,function(e,t){if(e.indexOf("item_")>-1)return r.push({id:t.s})}),(null!=(o=$(".total-order-listing .value")[0].innerHTML)?o.length:void 0)?c=triggermail.util.price($(".total-order-listing .value")[0].innerHTML):(null!=(a=window.br_data.basket_value)?a.length:void 0)&&(c=triggermail.util.price(window.br_data.basket_value)),i.order_id=t(),i.email=e,i.total=c,i.products=r,i.source="desktop integration",triggermail.purchase(i)}catch(e){e}},t=function(){var e;return jQuery(".order-number").eq(0).html().match(/Order Number:(.+)/)[1].trim()||(null!=(e=window.br_data)?e.order_id:void 0)},-1===window.location.href.indexOf("m.staples")&&(window.location.pathname.endsWith("checkout")?triggermail.custom("started_checkout",{}):window.location.pathname.endsWith("confirmOrder")&&triggermail.util.executeOnTruthy(t,i,3,500)),window.location.href.indexOf("m.staples")>-1)){if(window.location.pathname.endsWith("checkout"))return triggermail.custom("started_checkout",{});if(window.location.pathname.endsWith("easycheckoutorderconf"))return r={},n=[],$.each(Analytics.global.cart.lines,function(e,t){return n.push({id:t.sku})}),e=$(".subheader").text().match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)[0].replace(/.$/,""),r.order_id=Analytics.tracking.transactionid,r.email=e,r.total=Analytics.global.cart.subtotal,r.products=n,r.source="mobile integration",triggermail.purchase(r)}},trackSearch:function(){var e,t;if(!(window.location.hostname.indexOf("design.staples.com")>-1||window.location.hostname.indexOf("weeklyad.staples.com")>-1))return window.location.pathname.indexOf("/cat_")>-1&&(e=triggermail.util.sanitizeSearchTerm($("#categoryGroupId").val()||$("h1.dd-promo-header").eq(0).text()))&&triggermail.search({search_term:e}),t=/[\/]([^\/]+)[\/]directory_\1/i.exec(window.location.pathname),t?triggermail.search({search_term:t[1].replace("+"," ")}):void 0},trackCustom:function(){var e,t,i,r;if(window.location.href.indexOf("/deals/")>-1&&void 0!==(e=window.location.href.match(/deals\/([\w-]*)\/[\w-]*/)[1])&&triggermail.custom("viewed_deal",{deal_type:e}),window.location.href.indexOf("/StaplesOrderHistoryList")>-1&&"R"===triggermail.util.getUrlParam("reorderFlag")&&triggermail.custom("viewed_page",{page_type:"easy_reorder"}),window.location.href.indexOf("/marketing/auto-restock/")>-1&&triggermail.custom("viewed_page",{page_type:"auto_restock"}),t=triggermail.util.getUrlParam("icid"),t.indexOf("AutoRestock")>-1&&triggermail.custom("viewed_page",{page_type:"auto_restock_clickthrough"}),window.location.href.indexOf("supplies/ssreviewpay")>-1&&triggermail.custom("auto_restock_sub",{action_type:"started_payment"}),window.location.href.indexOf("supplies/ssmanagesubscription")>-1&&0===jQuery("#noactivsub").length){triggermail.custom("auto_restock_sub",{action_type:"view_active_subs"});try{i=[],jQuery("div#ActiveSubscription [name^=partNum]").each(function(){return i.push({id:jQuery(this).attr("value")})}),triggermail.custom("auto_restock_product",{products:i})}catch(e){e}}if(window.location.href.indexOf("StaplesSD/WeeklyAd")>-1&&triggermail.custom("viewed_page",{page_type:"weekly_ad"}),r=!1,window.location.href.indexOf("memberships/overview")>-1&&(triggermail.custom("viewed_page",{page_type:"membership_overview"}),r=!0),window.location.href.indexOf("gms/enroll")>-1&&triggermail.custom("viewed_page",{page_type:"membership_rewards_plus"}),window.location.href.indexOf("memberships/business-rewards-plus")>-1&&(triggermail.custom("viewed_page",{page_type:"membership_business_rewards_plus"}),r=!0),window.location.href.indexOf("memberships/premium")>-1&&(triggermail.custom("viewed_page",{page_type:"membership_premium"}),r=!0),r)try{return jQuery('button[type="submit"]').parents("form").eq(0).on("submit",function(){return triggermail.custom("membership_action",{action_type:"submit"})})}catch(e){e}},trackUnsubscribe:function(){},trackSubscribe:function(){return $("form button").on("click",function(e){var t;try{if(t=$('form[name="EmailSubscribeFormFooter"] label input#email').val(),triggermail.util.isValidEmail(t))return triggermail.identify({email:t,source:"email signup"})}catch(e){e}})},watchEmail:function(){var e,t,i,r,n,o,a,c,s,l,u,d;if(!(window.location.hostname.indexOf("weeklyad.staples.com")>-1)){if(window.location.href.indexOf("design.staples")>-1)return(null!=(n=Analytics.global)&&null!=(o=n.visitor)?o.email:void 0)&&(e=Analytics.global.visitor.email,c="site variable"),triggermail.util.isValidEmail(e)&&triggermail.identify({email:e,source:c,source_detail:"design.com"}),$("form").on("submit",function(){if(e=$('div input[name*="Email"]').val(),triggermail.util.isValidEmail(e))return triggermail.identify({email:e,source:"checkout flow",source_detail:"design.com"})});if(window.triggermail_email_address?(e=window.triggermail_email_address,c=triggermail.identifySource.SITE_VARIABLE,s="triggermail_email_address"):window.customerEmailId?(e=window.customerEmailId,c=triggermail.identifySource.SITE_VARIABLE,s="customer javascript variable"):triggermail.util.cookie.get("customerEmailAddress")?(e=triggermail.util.cookie.get("customerEmailAddress"),c=triggermail.identifySource.SITE_VARIABLE,s="customerEmailAddress"):triggermail.util.getUrlParam("om_rid")||triggermail.util.getUrlParam("cm_lm")?(i=triggermail.util.getUrlParam("om_rid"))&&triggermail.util.registerAndMergeOpaqueId(i):(null!=(a=window.skvisitor)?a.email:void 0)?(e=window.skvisitor.email,c=triggermail.identifySource.SITE_VARIABLE,s="skvisitor.email"):window.certonaCustomerEmail?(e=window.certonaCustomerEmail,c=triggermail.identifySource.SITE_VARIABLE,s="certonaCustomerEmail"):triggermail.util.cookie.get("skuseremail")?(t=triggermail.util.cookie.get("skuseremail"),e=String.fromCharCode.apply(this,function(){var e,i,n,o;for(n=t.split("."),o=[],e=0,i=n.length;e<i;e++)d=n[e],o.push(parseInt(d,r=16));return o}()),triggermail.identifySource.CUSTOM,s="skuseremail"):$(".cls_skEmailAddr").text()&&(e=$(".cls_skEmailAddr").text(),triggermail.identifySource.CUSTOM,s="cls_skEmailAddr"),triggermail.util.isValidEmail(e)){if(!(-1===window.location.href.indexOf("m.staples")&&window.location.pathname.indexOf("/listdetails")>-1))return triggermail.util.validateAndIdentify(e,c,s);if(u=[],$("td.pic1").slice(-5).each(function(e,t){var i;if(void 0!==(i=$(this).find("[name^=partNumber]").attr("value"))&&null!==i&&""!==i)return u.push(i)}),u.length>0)return l=new Date($.now()).toISOString().split("T")[0],triggermail.identify({email:e,source:c,source_detail:s,wishlist:u.join(","),wishlist_updated:l})}}},env:function(){var e,t;return e=["www.staples.com","login.staples.com","m.staples.com","design.staples.com","weeklyad.staples.com"],t=window.location.hostname,i.call(e,t)>=0?"p":"d"},keys:{lytics:{d:"dev",p:"staples"}}}}()}.call(void 0);var syncUserAudiences=function(){var e=triggermail.util.cookie.get("__bc_audience_sync");e=e?jQuery.parseJSON(e):{};var t=+(e.lastSyncTime||0);+new Date-t>36e5&&function(){var e=function(e){var t,i=function(e){triggermail.util.cookie.get(e)||triggermail.util.cookie.set(e,"true",void 0,triggermail.lytics.cookie.get_cross_subdomain())},r=function(e){triggermail.util.cookie.get(e)&&triggermail.util.cookie.remove(e,triggermail.lytics.cookie.get_cross_subdomain())},n=[],o=!!e.responseText,a={};try{a=o?jQuery.parseJSON(e.responseText):{}}catch(e){}o&&jQuery.each(a,function(e){n.push(e),i(e)}),t=triggermail.util.cookie.get("__bc_audience_sync"),t=t?jQuery.parseJSON(t):{},jQuery.each(t.audiences||[],function(e,t){-1===n.indexOf(t)&&r(t)}),t={lastSyncTime:+new Date,audiences:n},function(e){triggermail.util.cookie.set("__bc_audience_sync",JSON.stringify(e),void 0,triggermail.lytics.cookie.get_cross_subdomain())}(t)},t={url:"//bluecore.com/api/audiences/get_audience_info",data:{namespace:triggermail.integ.keys.lytics,customer_alias:triggermail.lytics.get_distinct_id()},async:!0,crossDomain:!0,complete:e};jQuery.ajax(t)}()};triggermail.initialize=function(){triggermail.integ.keys={};var e=triggermail.Partner.env();triggermail.integ.keys.lytics=triggermail.Partner.keys.lytics[e],triggermail.integ.debug=!1,triggermail.integ.initServices(),triggermail.init(),["124_rivington","lucy","nat_geo","servermonkey","vans"].indexOf(triggermail.integ.keys.lytics)>-1&&syncUserAudiences();var t=triggermail.util.getUrlParam("__distinct_id_override__");""!=t&&(triggermail.lytics.cookie.props.distinct_id=t,triggermail.lytics.cookie.save());var i=triggermail.util.getUrlParam("eton_distinct_id");""!=i&&(triggermail.lytics.cookie.props.distinct_id=i,triggermail.lytics.cookie.save());var r=triggermail.util.getUrlParam("mc_eid"),n=triggermail.lytics.cookie.props.distinct_id;r&&n!==r&&(r="mceid_"+r,n!==r&&(triggermail.merge({merge:{source:n,destination:r},customer:{distinct_id:r}}),triggermail.lytics.cookie.props.distinct_id=r,triggermail.lytics.cookie.save(),triggermail.lytics.register({mc_eid:r}))),triggermail.integ.init();var o=triggermail.util.getUrlParam("__auto_demo__");""!=o&&(triggermail.demo(),triggermail.identify({email:o}));try{var a=JSON.parse(triggermail.util.cookie.get(triggermail.lytics.cookie.name));(window.location.pathname.indexOf("/eton/")>-1||void 0===a.email)&&triggermail.eton.init()}catch(e){}},__checkJquery();var host_path="storage.googleapis.com/bluecore_addons/",token=triggermail.lytics.config?triggermail.lytics.config.token:null,constant=triggermail.Partner.keys.lytics?triggermail.Partner.keys.lytics.p:null;if(partner=token||constant,partner){var script=document.createElement("script");script.type="text/javascript",script.setAttribute("data-cfasync","false"),script.src=("https:"===document.location.protocol?"https://":"http://")+host_path+partner+".ju.js";var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)}